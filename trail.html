<html>

<head>
    <title>Trail</title>
</head>

<body>
    <div id="list">

    </div>
    <button onclick="showFive()">More</button>

    <script src="vendor/jquery/jquery.min.js"></script>
    <script>
        allBlogUrls=[];
        $.get("sitemap.txt", function(html, status) {
            html.split("\n").forEach(element => {
                console.log(element);
                allBlogUrls.push(element.split("/")[3]);
                console.log(allBlogUrls.length);
            });
        });
        listBlog = function(url) {
            console.log(url);
            var textLength = 200;
            $.get(url, function (html, status) {
                var title = html.match(/<title>(.*?)<\/title>/)[1];
                var intro = html.match(/<p>(.*?)<\/p>/)[1].substring(0,textLength);
                intro = intro.substr(0, Math.min(intro.length, intro.lastIndexOf(" ")));
                var div = document.createElement("div");
                div.innerHTML = "<h2>" + title + "</h2><p>" + intro + " . . .</p><hr/>";
                $("body").append(div);
            });
        };
        var lastIndex = 0;
        showFive = function() {
            for (i = 0; i< 5; i++) {
                listBlog(allBlogUrls[lastIndex++]);
            }
        }
    </script>
</body>

</html>